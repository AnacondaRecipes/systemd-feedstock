From c96d6d3b9327ea32803c779e4c18c328dff002df Mon Sep 17 00:00:00 2001
From: "Guillaume W. Bres" <guillaume.bressaix@gmail.com>
Date: Thu, 8 Sep 2022 15:54:57 +0200
Subject: [PATCH] basic/missing_loop.h: fix missing lo_flags LO_FLAGS_DIRECT_IO

---
 src/basic/missing_loop.h | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/basic/missing_loop.h b/src/basic/missing_loop.h
index 449858d3a781..7141544b64f0 100644
--- a/src/basic/missing_loop.h
+++ b/src/basic/missing_loop.h
@@ -14,6 +14,11 @@ struct loop_config {
 #define LOOP_CONFIGURE 0x4C0A
 #endif
 
+#ifndef LO_FLAGS_DIRECT_IO
+#define LO_FLAGS_DIRECT_IO 16
+#define LOOP_SET_DIRECT_IO 0x4C08
+#endif
+
 #ifndef LOOP_SET_STATUS_SETTABLE_FLAGS
-#define LOOP_SET_STATUS_SETTABLE_FLAGS (LO_FLAGS_AUTOCLEAR | LO_FLAGS_PARTSCAN)
+#define LOOP_SET_STATUS_SETTABLE_FLAGS (LO_FLAGS_AUTOCLEAR | LO_FLAGS_PARTSCAN | LO_FLAGS_DIRECT_IO)
 #endif
